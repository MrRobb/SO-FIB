<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This file documents the GNU C Library.

This is
The GNU C Library Reference Manual, for version
2.26.

Copyright (C) 1993-2017 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version
1.3 or any later version published by the Free
Software Foundation; with the Invariant Sections being "Free Software
Needs Free Documentation" and "GNU Lesser General Public License",
the Front-Cover texts being "A GNU Manual", and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>The GNU C Library: Actions in the NSS configuration</title>

<meta name="description" content="The GNU C Library: Actions in the NSS configuration">
<meta name="keywords" content="The GNU C Library: Actions in the NSS configuration">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Concept-Index.html#Concept-Index" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="NSS-Configuration-File.html#NSS-Configuration-File" rel="up" title="NSS Configuration File">
<link href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" rel="next" title="Notes on NSS Configuration File">
<link href="Services-in-the-NSS-configuration.html#Services-in-the-NSS-configuration" rel="prev" title="Services in the NSS configuration">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Actions-in-the-NSS-configuration"></a>
<div class="header">
<p>
Next: <a href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" accesskey="n" rel="next">Notes on NSS Configuration File</a>, Previous: <a href="Services-in-the-NSS-configuration.html#Services-in-the-NSS-configuration" accesskey="p" rel="prev">Services in the NSS configuration</a>, Up: <a href="NSS-Configuration-File.html#NSS-Configuration-File" accesskey="u" rel="up">NSS Configuration File</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Actions-in-the-NSS-configuration-1"></a>
<h4 class="subsection">29.2.2 Actions in the NSS configuration</h4>

<p>The second item in the specification gives the user much finer control
on the lookup process.  Action items are placed between two service
names and are written within brackets.  The general form is
</p>
<div class="display">
<pre class="display"><code>[</code> ( <code>!</code>? <var>status</var> <code>=</code> <var>action</var> )+ <code>]</code>
</pre></div>

<p>where
</p>
<div class="smallexample">
<pre class="smallexample"><var>status</var> &rArr; success | notfound | unavail | tryagain
<var>action</var> &rArr; return | continue
</pre></div>

<p>The case of the keywords is insignificant.  The <var>status</var>
values are the results of a call to a lookup function of a specific
service.  They mean:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>success</samp>&rsquo;
<a name="index-success"></a>
</dt>
<dd><p>No error occurred and the wanted entry is returned.  The default action
for this is <code>return</code>.
</p>
</dd>
<dt>&lsquo;<samp>notfound</samp>&rsquo;
<a name="index-notfound"></a>
</dt>
<dd><p>The lookup process works ok but the needed value was not found.  The
default action is <code>continue</code>.
</p>
</dd>
<dt>&lsquo;<samp>unavail</samp>&rsquo;
<a name="index-unavail"></a>
</dt>
<dd><a name="index-DNS-server-unavailable"></a>
<p>The service is permanently unavailable.  This can either mean the needed
file is not available, or, for DNS, the server is not available or does
not allow queries.  The default action is <code>continue</code>.
</p>
</dd>
<dt>&lsquo;<samp>tryagain</samp>&rsquo;
<a name="index-tryagain"></a>
</dt>
<dd><p>The service is temporarily unavailable.  This could mean a file is
locked or a server currently cannot accept more connections.  The
default action is <code>continue</code>.
</p></dd>
</dl>

<p>The <var>action</var> values mean:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>return</samp>&rsquo;
<a name="index-return"></a>
</dt>
<dd>
<p>If the status matches, stop the lookup process at this service
specification.  If an entry is available, provide it to the application.
If an error occurred, report it to the application.  In case of a prior
&lsquo;<samp>merge</samp>&rsquo; action, the data is combined with previous lookup results,
as explained below.
</p>
</dd>
<dt>&lsquo;<samp>continue</samp>&rsquo;
<a name="index-continue"></a>
</dt>
<dd>
<p>If the status matches, proceed with the lookup process at the next
entry, discarding the result of the current lookup (and any merged
data).  An exception is the &lsquo;<samp>initgroups</samp>&rsquo; database and the
&lsquo;<samp>success</samp>&rsquo; status, where &lsquo;<samp>continue</samp>&rsquo; acts like <code>merge</code>
below.
</p>
</dd>
<dt>&lsquo;<samp>merge</samp>&rsquo;
<a name="index-merge"></a>
</dt>
<dd>
<p>Proceed with the lookup process, retaining the current lookup result.
This action is useful only with the &lsquo;<samp>success</samp>&rsquo; status.  If a
subsequent service lookup succeeds and has a matching &lsquo;<samp>return</samp>&rsquo;
specification, the results are merged, the lookup process ends, and the
merged results are returned to the application.  If the following service
has a matching &lsquo;<samp>merge</samp>&rsquo; action, the lookup process continues,
retaining the combined data from this and any previous lookups.
</p>
<p>After a <code>merge</code> action, errors from subsequent lookups are ignored,
and the data gathered so far will be returned.
</p>
<p>The &lsquo;<samp>merge</samp>&rsquo; only applies to the &lsquo;<samp>success</samp>&rsquo; status.  It is
currently implemented for the &lsquo;<samp>group</samp>&rsquo; database and its group
members field, &lsquo;<samp>gr_mem</samp>&rsquo;.  If specified for other databases, it
causes the lookup to fail (if the <var>status</var> matches).
</p>
<p>When processing &lsquo;<samp>merge</samp>&rsquo; for &lsquo;<samp>group</samp>&rsquo; membership, the group GID
and name must be identical for both entries.  If only one or the other is
a match, the behavior is undefined.
</p>
</dd>
</dl>

<p>If we have a line like
</p>
<div class="smallexample">
<pre class="smallexample">ethers: nisplus [NOTFOUND=return] db files
</pre></div>

<p>this is equivalent to
</p>
<div class="smallexample">
<pre class="smallexample">ethers: nisplus [SUCCESS=return NOTFOUND=return UNAVAIL=continue
                 TRYAGAIN=continue]
        db      [SUCCESS=return NOTFOUND=continue UNAVAIL=continue
                 TRYAGAIN=continue]
        files
</pre></div>

<p>(except that it would have to be written on one line).  The default
value for the actions are normally what you want, and only need to be
changed in exceptional cases.
</p>
<p>If the optional <code>!</code> is placed before the <var>status</var> this means
the following action is used for all statuses but <var>status</var> itself.
I.e., <code>!</code> is negation as in the C language (and others).
</p>
<p>Before we explain the exception which makes this action item necessary
one more remark: obviously it makes no sense to add another action
item after the <code>files</code> service.  Since there is no other service
following the action <em>always</em> is <code>return</code>.
</p>
<a name="index-nisplus_002c-and-completeness"></a>
<p>Now, why is this <code>[NOTFOUND=return]</code> action useful?  To understand
this we should know that the <code>nisplus</code> service is often
complete; i.e., if an entry is not available in the NIS+ tables it is
not available anywhere else.  This is what is expressed by this action
item: it is useless to examine further services since they will not give
us a result.
</p>
<a name="index-nisplus_002c-and-booting"></a>
<a name="index-bootstrapping_002c-and-services"></a>
<p>The situation would be different if the NIS+ service is not available
because the machine is booting.  In this case the return value of the
lookup function is not <code>notfound</code> but instead <code>unavail</code>.  And
as you can see in the complete form above: in this situation the
<code>db</code> and <code>files</code> services are used.  Neat, isn&rsquo;t it?  The
system administrator need not pay special care for the time the system
is not completely ready to work (while booting or shutdown or
network problems).
</p>

<hr>
<div class="header">
<p>
Next: <a href="Notes-on-NSS-Configuration-File.html#Notes-on-NSS-Configuration-File" accesskey="n" rel="next">Notes on NSS Configuration File</a>, Previous: <a href="Services-in-the-NSS-configuration.html#Services-in-the-NSS-configuration" accesskey="p" rel="prev">Services in the NSS configuration</a>, Up: <a href="NSS-Configuration-File.html#NSS-Configuration-File" accesskey="u" rel="up">NSS Configuration File</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html#Concept-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
